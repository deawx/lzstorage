!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.commonStore=t()}(this,function(){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,o,n;t=r,n=i[o=e],o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n})}return r}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v={params:"Insufficient parameters"},l=Object.prototype.hasOwnProperty;function u(){var e;"undefined"!=typeof console&&(e=console).log.apply(e,arguments)}function s(){var e;"undefined"!=typeof console&&(e=console).error.apply(e,arguments)}function f(e){return!Array.isArray(e)&&null!==e&&"object"===d(e)}function g(){if(1<arguments.length){var e=Array.prototype.slice.call(arguments),t=e[0],o=e[1],n=void 0===o?"":o,r=e[2],i=e[3],a=void 0===i?"/":i,c=e[4],l=void 0===c?window.location.hostname:c,u=n;null!==n&&"object"===d(n)&&(u=JSON.stringify(n));var s=new Date;"number"==typeof r&&(r===1/0?s=new Date("Thu, 31 Dec 2037 00:00:00 GMT"):s.setTime(s.getTime()+24*r*60*60*1e3));var f=r?"; expires=".concat(s.toUTCString()):"",g="; path=".concat(a.trim()),p="";-1===["localhost","127.0.0.1",null].indexOf(l)&&(p="; domain=".concat(l.trim()));var y="";"https:"===window.location.protocol&&(y="; secure"),document.cookie="".concat(t,"=").concat(u).concat(f).concat(p).concat(g).concat(y)}else this.config&&this.config.debug&&console.log(v.params)}function p(){if(0<arguments.length){var e=Array.prototype.slice.call(arguments)[0],t=null;if((t=decodeURIComponent(document.cookie).split(";")).length){var o=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var c=i.value;if(-1<(c=c.trim()).indexOf("".concat(e,"=")))return c.substring("".concat(e,"=").length,c.length).trim()}}catch(e){n=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(n)throw r}}}}return""}function i(){if(0<arguments.length){var e,t=Array.prototype.slice.call(arguments),o=t[0],n=t[1],r=void 0===n?"/":n,i=t[2],a=void 0===i?window.location.hostname:i,c="";return-1===["localhost","127.0.0.1",null].indexOf(a)&&(c="; domain=".concat(a.trim())),e="".concat(o,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC").concat(c,"; path=").concat(r),document.cookie=e,!p(o).length}return!1}var e,t=a({},{config:{debug:!1},available:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return this.config.debug&&u("Storage API is not supported in this environment"),!1}},set:function(){if(1<arguments.length){var e=Array.prototype.slice.call(arguments),t=e[0],o=e[1],n=e[2],r=void 0!==n&&n,i=o;if(null!==o&&"object"===d(o)&&(i=JSON.stringify(o)),this.available())try{window[r?"sessionStorage":"localStorage"].setItem(t,i)}catch(e){this.config.debug&&s(e)}else g(t,i,r?1/0:void 0)}else this.config.debug&&u(v.params)},remove:function(){if(0<arguments.length){var e=Array.prototype.slice.call(arguments)[0];if(this.available())try{return window.localStorage.removeItem(e),window.sessionStorage.removeItem(e),!window.localStorage.key(e)||!window.sessionStorage.key(e)||i(e)}catch(e){this.config.debug&&s(e)}return i(e)}this.config.debug&&u(v.params)},getAll:function(){var t=this;if(0<arguments.length){var e=Array.prototype.slice.call(arguments),o=e[0],n=e[1],r=void 0!==n&&n,i=[];if(this.available())try{var a=["sessionStorage"];r||a.push("localStorage"),a.forEach(function(e){l.call(window[e],o)&&i.push({value:window[e].getItem(o),storage:e})})}catch(e){this.config.debug&&s(e)}var c=p(o);return c&&i.push({value:c,storage:"cookie"}),i.map(function(e){try{e.value=JSON.parse(e.value)}catch(e){t.config.debug&&u(e)}return e})}return[]},get:function(){if(0<arguments.length){var e=Array.prototype.slice.call(arguments),t=e[0],o=e[1],n=void 0!==o&&o,r=this.getAll(t,n);if(0===r.length)return;if(1===r.length)return r[0].value;if(3===r.length)return r.filter(function(e){return e.storage===(n?"sessionStorage":"localStorage")})[0].value;var i=r.map(function(e){return e.storage});return n?-1<i.indexOf("sessionStorage")?r.filter(function(e){return"sessionStorage"===e.storage})[0].value:r.filter(function(e){return"cookie"===e.storage})[0].value:r.filter(function(e){return-1<["sessionStorage","localStorage"].indexOf(e.storage)})[0].value}this.config.debug&&u(v.params)},update:function(){if(2===arguments.length){var n=this,e=Array.prototype.slice.call(arguments),r=e[0],t=e[1],o=this.getAll(r),i=null;if("function"==typeof t)i=t.apply(void 0,c(o));else if(void 0!==d(t))try{i=JSON.parse(t)}catch(e){this.config.debug&&s(e),i=t}void 0!==i&&o.forEach(function(e){var t=e.value;f(t)&&f(i)?e.value=a({},t,i):e.value=i}),o.forEach(function(e){var t=e.value,o=e.storage;-1<["sessionStorage","localStorage"].indexOf(o)&&n.set(r,t,"sessionStorage"===o),"cookie"===o&&g(r,t)})}else this.config.debug&&u(v.params)}},{setCookie:g,getCookie:p,removeCookie:i,resetCookie:function(e,t,o,n,r){i(e,n,r),g(e,t,o,n,r)}});return(e=window.jQuery)&&(e.store=t),t});
